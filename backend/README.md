# IQ Tracker Backend

Backend API server for the IQ Tracker application.

## Responsibilities

- User authentication and account management
- Serving IQ test questions to iOS app
- Storing user responses and test results
- Calculating scores and generating insights/trends
- Managing push notification scheduling
- Tracking which questions each user has answered

## Tech Stack

- **Language/Framework**: Python 3.10+ with FastAPI
- **Database**: PostgreSQL 14+
- **ORM**: SQLAlchemy
- **Migrations**: Alembic
- **Authentication**: JWT with Bcrypt
- **API Documentation**: Swagger/OpenAPI (auto-generated by FastAPI)

## API Endpoints

(To be designed)

### Planned Endpoints:
- Authentication (login, register, token refresh)
- User profile management
- Question fetching (with logic to exclude already-answered questions)
- Response submission
- Results and insights retrieval
- Notification preferences

## Database Schema

(To be designed)

### Planned Tables:
- `users` - User accounts and profiles
- `questions` - IQ test questions pool
- `user_questions` - Tracks which questions each user has seen
- `responses` - User answers to questions
- `test_results` - Aggregated test scores over time
- `notifications` - Notification scheduling and history

## Setup

### Prerequisites

- Python 3.10 or higher
- PostgreSQL 14 or higher
- pip (Python package manager)

### 1. Database Setup

#### Install PostgreSQL

**macOS (using Homebrew):**
```bash
brew install postgresql@14
brew services start postgresql@14
```

**Ubuntu/Debian:**
```bash
sudo apt-get update
sudo apt-get install postgresql postgresql-contrib
sudo systemctl start postgresql
```

**Windows:**
Download and install from [postgresql.org](https://www.postgresql.org/download/windows/)

#### Create Databases

Once PostgreSQL is installed and running, create the development and test databases:

```bash
# Connect to PostgreSQL
psql -U <your-username> -d postgres

# Create databases
CREATE DATABASE iq_tracker_dev;
CREATE DATABASE iq_tracker_test;

# Verify creation
\l

# Exit
\q
```

Replace `<your-username>` with your system username (typically the same as your macOS/Linux username).

### 2. Environment Configuration

Copy the example environment file and configure it:

```bash
cp .env.example .env
```

Edit `.env` and update the following values:
- `DATABASE_USER`: Your PostgreSQL username
- `DATABASE_PASSWORD`: Your PostgreSQL password (if set)
- `DATABASE_URL`: Full connection string (update username/password if needed)
- `SECRET_KEY`: Generate a secure random string
- `JWT_SECRET_KEY`: Generate a different secure random string

**Example for local development (macOS/Linux):**
```env
DATABASE_URL=postgresql://yourusername@localhost:5432/iq_tracker_dev
TEST_DATABASE_URL=postgresql://yourusername@localhost:5432/iq_tracker_test
```

### 3. Python Environment

(To be added in Phase 1 - P1-006)

### 4. Run Migrations

(To be added in Phase 1 - P1-005)

### 5. Start Development Server

(To be added in Phase 1 - P1-007)

## Development

(To be added)

## Deployment

(To be added)
